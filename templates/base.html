<!doctype html>
<html lang="tr">
<head>
<<<<<<< HEAD
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>{% block title %}Online Galeri{% endblock %}</title>

  <!-- Tailwind Play CDN - hızlı prototip için -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- Favicon -->
  <link rel="icon" href="{{ url_for('static', filename='favicon.ico') }}" />

  {% block head_extra %}{% endblock %}
</head>
<body class="bg-gray-50 text-gray-900 min-h-screen flex flex-col">
  <!-- Navbar -->
  <header class="bg-white shadow-sm">
    <div class="container mx-auto px-4 py-4 flex items-center justify-between">
      <a href="{{ url_for('index') }}" class="text-xl font-semibold">Online Galeri</a>
      <nav class="space-x-4">
        <a href="{{ url_for('upload') }}" class="hover:underline">Yükle</a>
        <a href="{{ url_for('contact') }}" class="hover:underline">İletişim</a>
      </nav>
    </div>
  </header>

  <!-- Main -->
  <main class="container mx-auto px-4 py-8 flex-1">
    {% with messages = get_flashed_messages() %}
      {% if messages %}
        <div class="mb-4">
          {% for m in messages %}
            <div class="p-3 bg-green-100 border border-green-200 rounded text-green-800">{{ m }}</div>
          {% endfor %}
        </div>
      {% endif %}
    {% endwith %}

    {% block content %}{% endblock %}
  </main>

  <!-- Footer -->
  <footer class="bg-white border-t">
    <div class="container mx-auto px-4 py-6 text-sm text-gray-600">
      © {{ current_year or 2025 }} Online Galeri — Tasarımcılarınızla birlikte.
    </div>
  </footer>

  {% block scripts %}{% endblock %}
=======
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>{% block title %}Online Galeri{% endblock %}</title>
	<link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
	{% block head %}{% endblock %}
</head>
<body>
	{% include 'components/navbar.html' %}

		<main class="container py-4">
				{% block content %}{% endblock %}
		</main>

		<!-- Auth offcanvas (login / register) - slides from right -->
		<div class="offcanvas offcanvas-end" tabindex="-1" id="authOffcanvas" aria-labelledby="authOffcanvasLabel">
		  <div class="offcanvas-header">
			<h5 class="offcanvas-title" id="authOffcanvasLabel">Hesabınızla Giriş Yap veya Kayıt Ol</h5>
			<button type="button" class="btn-close text-reset" data-bs-dismiss="offcanvas" aria-label="Kapat"></button>
		  </div>
		  <div class="offcanvas-body">
			<ul class="nav nav-tabs mb-3" id="authTab" role="tablist">
			  <li class="nav-item" role="presentation">
				<button class="nav-link active" id="login-tab" data-bs-toggle="tab" data-bs-target="#login" type="button" role="tab" aria-controls="login" aria-selected="true">Giriş</button>
			  </li>
			  <li class="nav-item" role="presentation">
				<button class="nav-link" id="register-tab" data-bs-toggle="tab" data-bs-target="#register" type="button" role="tab" aria-controls="register" aria-selected="false">Kayıt</button>
			  </li>
			</ul>
			<div class="tab-content">
			  <div class="tab-pane fade show active" id="login" role="tabpanel" aria-labelledby="login-tab">
				{% include 'components/auth_login.html' %}
			  </div>
			  <div class="tab-pane fade" id="register" role="tabpanel" aria-labelledby="register-tab">
				{% include 'components/auth_register.html' %}
			  </div>
			</div>
		  </div>
		</div>

		<!-- Profile lookup modal -->
		<div class="modal fade" id="profileLookupModal" tabindex="-1" aria-labelledby="profileLookupLabel" aria-hidden="true">
		  <div class="modal-dialog modal-sm modal-dialog-centered">
			<div class="modal-content">
			  <div class="modal-header">
				<h5 class="modal-title" id="profileLookupLabel">Profil Görüntüle</h5>
				<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Kapat"></button>
			  </div>
			  <div class="modal-body">
				<form id="profileLookupForm">
				  <label for="lookupUsername" class="form-label">Kullanıcı adı</label>
				  <input id="lookupUsername" name="username" class="form-control" placeholder="örn: cemre_online" required>
				  <div class="mt-3 text-end">
				    <button type="submit" class="btn btn-primary">Aç</button>
				  </div>
				</form>
			  </div>
			</div>
		  </div>
		</div>

	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
	<script src="{{ url_for('static', filename='js/darkmode.js') }}"></script>
	<script>
	// Profile lookup modal: redirect to /profile?username=...
	(function(){
	  const form = document.getElementById('profileLookupForm');
	if(form){
		form.addEventListener('submit', function(e){
			e.preventDefault();
			const input = document.getElementById('lookupUsername');
			const u = input && input.value && input.value.trim();
			if(!u) return;
			// Save as current user in localStorage so Profile button opens this directly
			try{ localStorage.setItem('currentUser', u); }catch(err){}
			// hide modal then redirect
			try{ var modalEl = document.getElementById('profileLookupModal'); var m = bootstrap.Modal.getInstance(modalEl) || new bootstrap.Modal(modalEl); m.hide(); }catch(err){}
			window.location.href = '/profile?username=' + encodeURIComponent(u);
		});
	}

	// profileBtn behavior: prefer server-side current user, then localStorage, then lookup modal
	const profileBtn = document.getElementById('profileBtn');
	const serverCurrentUser = {% if current_user.is_authenticated %}'{{ current_user.username }}'{% else %}null{% endif %};
	if(profileBtn){
		profileBtn.addEventListener('click', function(){
			try{
				if(serverCurrentUser){
					// server-side logged in user -> open their profile
					window.location.href = '/profile';
					return;
				}
				const cur = localStorage.getItem('currentUser');
				if(cur && cur.trim().length>0){
					window.location.href = '/profile?username=' + encodeURIComponent(cur.trim());
					return;
				}
			}catch(e){}
			// open modal to lookup
			try{ var modalEl = document.getElementById('profileLookupModal'); var m = bootstrap.Modal.getInstance(modalEl) || new bootstrap.Modal(modalEl); m.show(); }catch(err){}
		});
	}
	})();
	</script>
	{% block scripts %}{% endblock %}
>>>>>>> origin/cemre
</body>
</html>
