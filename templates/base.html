<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}Online Galeri{% endblock %}</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">

    <style>
    /* Flash mesaj kutusu */
    .flash-notice {
        position: fixed; top: 20px; left: 50%; transform: translateX(-50%) translateY(-20px);
        padding: 12px 24px; background-color: rgba(200,200,200,0.9); color: #000;
        border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.3);
        opacity: 0; pointer-events: none; transition: all 0.5s ease; z-index: 1050;
    }
    .flash-notice.show { opacity: 1; transform: translateX(-50%) translateY(0); }

    /* Butonları yan yana ve hizalı tutan grup */
    .user-navbar-group {
        display: flex !important;
        align-items: center !important;
        gap: 12px !important;
    }

    /* Light mode zorlaması için temel kural */
    body.light-mode {
        background-color: #ffffff !important;
        color: #000000 !important;
    }
    </style>
    
    <script>
        (function() {
            const savedTheme = localStorage.getItem('theme');
            if (savedTheme === 'light') {
                document.documentElement.classList.add('light-mode');
                document.addEventListener("DOMContentLoaded", function() {
                    document.body.classList.add('light-mode');
                });
            }
        })();
    </script>
</head>
<body>

{# Navbar kısıtlaması korunuyor #}
{% if request.endpoint not in ['index', 'login', 'register', 'admin'] %}
<nav class="navbar navbar-expand-lg navbar-dark bg-dark mb-4 shadow-sm">
    <div class="container">
        <a class="navbar-brand fw-bold" href="{{ url_for('index') }}">Verzia</a>

        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
            <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="navbarNav">
            <ul class="navbar-nav me-auto">
                <li class="nav-item">
                    <a class="nav-link" href="{{ url_for('about') if 'about' in request.url_rule.endpoint else '#' }}">Hakkında</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="{{ url_for('contact') if 'contact' in request.url_rule.endpoint else '#' }}">İletişim</a>
                </li>
            </ul>

            {% if current_user.is_authenticated %}
            <div class="user-navbar-group ms-auto">
                <a href="{{ url_for('profile') }}" class="btn btn-outline-info btn-sm fw-bold">
                    {{ current_user.username }}
                </a>
                
                <a href="{{ url_for('logout') }}" class="btn btn-outline-danger btn-sm">
                    Çıkış Yap
                </a>

                <a class="nav-link text-light small" href="{{ url_for('upload') }}">Yükle</a>
            </div>
            {% endif %}
        </div>
    </div>
</nav>
{% endif %}

<div class="container-fluid px-3 px-md-5">
    {% block content %}{% endblock %}
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

<script>
// TEMA DEĞİŞTİRME FONKSİYONU (HAFIZALI)
function toggleMode() {
    const isLight = document.body.classList.toggle('light-mode');
    localStorage.setItem('theme', isLight ? 'light' : 'dark');
}

document.addEventListener("DOMContentLoaded", function() {
    // Flash Mesajları
    {% with messages = get_flashed_messages() %}
        {% for message in messages %}
            const flash = document.createElement('div');
            flash.className = 'flash-notice';
            flash.textContent = "{{ message }}";
            document.body.appendChild(flash);
            setTimeout(() => flash.classList.add('show'), 50);
            setTimeout(() => { flash.classList.remove('show'); setTimeout(() => flash.remove(), 500); }, 3000);
        {% endfor %}
    {% endwith %}
});
</script>

</body>
</html>


































