<!doctype html>
<html lang="tr">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">

	<title>{% block title %}Online Galeri{% endblock %}</title>

	<!-- Bootstrap CSS -->
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">

	<!-- Custom CSS -->
	<link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">

	{% block head %}{% endblock %}
</head>

<body class="bg-light">

	<!-- NAVBAR -->
	{% include 'components/navbar.html' %}

	<!-- MAIN CONTENT -->
	<main class="container py-4">
		{% with messages = get_flashed_messages() %}
			{% if messages %}
				<div class="alert alert-success">
					{% for m in messages %}
						<div>{{ m }}</div>
					{% endfor %}
				</div>
			{% endif %}
		{% endwith %}

		{% block content %}{% endblock %}
	</main>

	<!-- AUTH OFFCANVAS (LOGIN / REGISTER) -->
	<div class="offcanvas offcanvas-end" tabindex="-1" id="authOffcanvas">
		<div class="offcanvas-header">
			<h5 class="offcanvas-title">Hesap İşlemleri</h5>
			<button type="button" class="btn-close" data-bs-dismiss="offcanvas"></button>
		</div>
		<div class="offcanvas-body">

			<ul class="nav nav-tabs mb-3">
				<li class="nav-item">
					<button class="nav-link active" data-bs-toggle="tab" data-bs-target="#loginTab">Giriş</button>
				</li>
				<li class="nav-item">
					<button class="nav-link" data-bs-toggle="tab" data-bs-target="#registerTab">Kayıt</button>
				</li>
			</ul>

			<div class="tab-content">
				<div class="tab-pane fade show active" id="loginTab">
					{% include 'components/auth_login.html' %}
				</div>
				<div class="tab-pane fade" id="registerTab">
					{% include 'components/auth_register.html' %}
				</div>
			</div>

		</div>
	</div>

	<!-- PROFILE LOOKUP MODAL -->
	<div class="modal fade" id="profileLookupModal" tabindex="-1">
		<div class="modal-dialog modal-sm modal-dialog-centered">
			<div class="modal-content">
				<div class="modal-header">
					<h5 class="modal-title">Profil Ara</h5>
					<button class="btn-close" data-bs-dismiss="modal"></button>
				</div>
				<div class="modal-body">
					<form id="profileLookupForm">
						<label class="form-label">Kullanıcı adı</label>
						<input class="form-control" id="lookupUsername" placeholder="ör: beril123" required>
						<div class="mt-3 text-end">
							<button class="btn btn-primary" type="submit">Aç</button>
						</div>
					</form>
				</div>
			</div>
		</div>
	</div>

	<!-- Bootstrap JS -->
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

	<!-- Darkmode -->
	<script src="{{ url_for('static', filename='js/darkmode.js') }}"></script>

	<!-- Profile Lookup Script -->
	<script>
	(function(){
		const form = document.getElementById('profileLookupForm');
		form?.addEventListener('submit', function(e){
			e.preventDefault();
			const u = lookupUsername.value.trim();
			if(!u) return;

			try { localStorage.setItem('currentUser', u); } catch(e){}
			window.location.href = '/profile?username=' + encodeURIComponent(u);
		});
	})();
	</script>

	{% block scripts %}{% endblock %}
</body>
</html>

